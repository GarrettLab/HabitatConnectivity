<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>User guide • geohabnet</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="User guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">geohabnet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/analysis.html">Mapping habitat connectivity with geohabnet</a></li>
    <li><a class="dropdown-item" href="../articles/distance_strategy.html">Distance Strategy</a></li>
    <li><a class="dropdown-item" href="../articles/global_analysis.html">Global Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/user_guide.html">User guide</a></li>
    <li><a class="dropdown-item" href="../articles/Using-raster-file.html">Using raster file</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/GarrettLab/HabitatConnectivity/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>User guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/GarrettLab/HabitatConnectivity/blob/HEAD/vignettes/articles/user_guide.Rmd" class="external-link"><code>vignettes/articles/user_guide.Rmd</code></a></small>
      <div class="d-none name"><code>user_guide.Rmd</code></div>
    </div>

    
    
<p>Welcome to the user guide for geohabnet, an R package for the
analysis of habitat landscape connectivity!</p>
<p>This section is designed for users already familiar with R and
RStudio. While RStudio is considered an interactive environment, using R
from the CLI is not.</p>
<p>The underlying theory for calculating habitat connectivity is based
on network analysis. To get an idea of the concepts of habitat
connectivity in geohabnet, users are recommended to check Xing et
al. (2020) – Global cropland connectivity: A risk factor for invasion
and saturation by emerging pathogens and pests. BioScience 70(9):
744-758.</p>
<div class="section level2">
<h2 id="installation-and-pre-requisites">Installation and pre-requisites<a class="anchor" aria-label="anchor" href="#installation-and-pre-requisites"></a>
</h2>
<p>The geohabnet R package can be directly installed and loaded in
RStudio using the following commands. For the stable version published
in CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"geohabnet"</span><span class="op">)</span></span></code></pre></div>
<p>This version 2.2 is available in <a href="https://cran.r-project.org/web/packages/geohabnet/index.html" class="external-link">CRAN</a></p>
<p>For the latest development version available on GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"GarrettLab/CroplandConnectivity"</span>, subdir <span class="op">=</span> <span class="st">"geohabnet"</span><span class="op">)</span></span></code></pre></div>
<p>This version is available at the <a href="https://github.com/GarrettLab/HabitatConnectivity" class="external-link">GitHub
repository</a></p>
<p>In either case, the user will be prompted to update dependencies to
other R packages during the installation in RStudio. We recommend
updating all the package dependencies. The dependencies of the geohabnet
package and their minimum versions required can be accessed by the
following code:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">desc</span><span class="fu">::</span><span class="fu"><a href="https://desc.r-lib.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"geohabnet"</span><span class="op">)</span></span></code></pre></div>
<p>Note that desc::desc() is a function from an external package and
requires installation for its use. Now, the geohabnet package can be
loaded into the current R environment.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://garrettlab.github.io/HabitatConnectivity/">geohabnet</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>The landing page and documentation can be accessed using ?geohabnet.
This guide was written for geohabnet 2.2, which is available for
download in CRAN and GitHub.</p>
<p>The help page for all the functions can be accessed with
<code>?geohabnet::fun</code> or <code>help(geohabnet::fun)</code>, where
fun needs to be changed to the name of a function of your interest. For
example, <code>?geohabnet::msean()</code> or simply <code><a href="../reference/sean.html">?msean</a></code>
will provide documentation for the function <code><a href="../reference/sean.html">msean()</a></code>.</p>
<p><code>geohabnet 2.2</code> provides two main functions to estimate
and map the connectivity of locations where habitat is present
(hereafter, habitat connectivity): <code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code>
and <code><a href="../reference/sean.html">msean()</a></code>. The package also offers supplementary
functions, but they are not covered in this user guide. Before running
the function, please review the description of each parameter below.
Well, there are over ten parameters that can be used in either
<code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code> or <code><a href="../reference/sean.html">msean()</a></code>. The
parameters in <code><a href="../reference/sean.html">msean()</a></code> can be modified directly within the
function in RStudio, as is common in many R packages.
<code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code> requires a list of parameters,
providing an organized way to easily change the default parameter values
without listing them every time. The list of parameters for
<code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code> is called
<code>Parameters.yaml</code>.</p>
<p>The following steps allow you to access the
<code>Parameters.yaml</code> file, specify parameter values, and use
them for analysis in <code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code>:</p>
<ol style="list-style-type: decimal">
<li>You can get the Parameters.yaml file by running
<code><a href="../reference/get_parameters.html">geohabnet::get_parameters()</a></code> and specifying the location
where the file will be saved. Use <code>iwindow = TRUE</code> for
interactive selection or provide an absolute file path to the parameter
out_path for non-interactive use. For example, Plex ran the
following:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_parameters.html">get_parameters</a></span><span class="op">(</span>out_path <span class="op">=</span> <span class="st">"C:/Users/plexaaron/Documents"</span><span class="op">)</span></span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li><p>Open the Parameters.yaml file in any program that allows you to
edit it (outside RStudio). Please do not alter the structure of the yaml
file and parameter names to ensure it will be successfully compatible
with <code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code>. Except for host, this file
will contain default acceptable values for the supported parameters (see
picture below).</p></li>
<li><p>Manually modify or add values in the Parameters.yaml file and
save it.</p></li>
<li><p>Feed the new Parameters.yaml file to the package using
<code><a href="../reference/set_parameters.html">geohabnet::set_parameters()</a></code> which will return TRUE if the
parameters were set successfully. For example, Plex ran the
following:</p></li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_parameters.html">set_parameters</a></span><span class="op">(</span>new_params <span class="op">=</span> <span class="st">"C:/Users/plexaaron/Documents/parameters.yaml"</span><span class="op">)</span></span></code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>Now you can run <code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code> to produce maps
of habitat connectivity.</li>
</ol>
</div>
<div class="section level2">
<h2 id="setting-parameters-in-sensitivity_analysis-and-msean">Setting parameters in sensitivity_analysis() and msean()<a class="anchor" aria-label="anchor" href="#setting-parameters-in-sensitivity_analysis-and-msean"></a>
</h2>
<div class="section level3">
<h3 id="providing-habitat-distribution">1. Providing habitat distribution<a class="anchor" aria-label="anchor" href="#providing-habitat-distribution"></a>
</h3>
<p>Users can provide any type of habitat map that is compatible with the
<code>terra:rast()</code> function. Typically, this is a TIFF file in
the standard geographic coordinate system (WGS84). Acceptable entries in
this SpatRaster range from zero (no habitat is available in a location)
to one (the location is fully covered with habitat for a species).</p>
<p>Host availability is an important component of habitat quality for
plant pathogens. Here, we provide two ways for providing maps of host
availability for geohabnet. The first one is based on data sources for
the global distribution of crop hosts, and the latter is intended for
using your data.</p>
<p>• **Your own data*. The <code>geohabnet</code> package is designed to
accept raster files as inputs for the distribution of habitat
availability. You can provide your raster file in two ways:</p>
<p>To use <code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code>, you can set the file
parameter under Host to the absolute path of the raster file (see
example in the figure above).</p>
<p>To use <code><a href="../reference/sean.html">msean()</a></code>, the user is required to read the habitat
map directly in R. For example:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hab.rast</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="st">"habitat-map-example.tif"</span><span class="op">)</span></span></code></pre></div>
<p>• <strong>Monfreda Dataset</strong>. Monfreda et al. (2008) provides
information for the geographic distribution of 172 crop categories.
These maps can be used as a first approximation for the habitat quality
of plant pests.</p>
<p>You can access this dataset directly in R using the
<code>geodata</code> package. Run <code><a href="https://rdrr.io/pkg/geodata/man/crop_monfreda.html" class="external-link">geodata::monfredaCrops()</a></code>
in your console to check which crops are available in the Monfreda
dataset. You can use a SpatRaster of the crop of interest in
<code>geohabnet</code> with the following code:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">geodata</span><span class="op">)</span></span>
<span><span class="va">hab.rast</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/geodata/man/crop_monfreda.html" class="external-link">crop_monfreda</a></span><span class="op">(</span>crop <span class="op">=</span> <span class="st">"banana"</span>, var <span class="op">=</span> <span class="st">"area_f"</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://garrettlab.github.io/HabitatConnectivity/">geohabnet</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/sean.html">msean</a></span><span class="op">(</span>rast <span class="op">=</span> <span class="va">hab.rast</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can access the Monfreda dataset by downloading
crop distribution maps from <a href="http://www.earthstat.org/" class="external-link">EarthStat</a>. You can then provide the
location of the downloaded TIFF file in the Parameters.yaml file when
using <code><a href="../reference/sensitivity_analysis.html">sensitivity_analysis()</a></code>.</p>
<p>• <strong>MAPSPAM dataset</strong>. This dataset provides information
for the global distribution of 42 crops or crop groups (IFPRI 2019). You
may want to use the harvested area or physical area for your analysis of
habitat connectivity in <code>geohabnet</code>: You can access this
dataset in R using the geodata package. Run
<code><a href="https://rdrr.io/pkg/geodata/man/crop_spam.html" class="external-link">geodata::spamCrops()</a></code> in your console to check which crops
are available in the MAPSPAM dataset. You can use a SpatRaster of the
crop of interest in <code>geohabnet</code> with the following code:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(geodata)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>hab.rast <span class="ot">&lt;-</span> <span class="fu">crop_spam</span>(<span class="at">crop =</span> <span class="st">"banana"</span>, <span class="at">var =</span> <span class="st">"phys_area"</span>, <span class="at">path =</span> <span class="fu">tempdir</span>()</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>conv.factor <span class="ot">&lt;-</span> <span class="fu">res</span>(hab.rast)[<span class="dv">1</span>]<span class="sc">*</span><span class="dv">111000</span> <span class="sc">*</span> <span class="fu">res</span>(hab.rast)[<span class="dv">1</span>]<span class="sc">*</span><span class="dv">111000</span> <span class="sc">/</span> <span class="dv">10000</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>hab.rast <span class="ot">&lt;-</span> hab.rast<span class="sc">$</span>banana_phys_area_all <span class="sc">/</span> conv.factor</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="fu">library</span>(geohabnet)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">msean</span>(<span class="at">rast =</span> hab.rast)</span></code></pre></div>
<p>Note that we convert the physical area of crop availability in
hectares to the fraction of total area occupied by the crop. The
<code>conv.factor</code> estimates the total area of each grid cell in
hectares.</p>
<p>Alternatively, you can access the MAPSPAM dataset by downloading crop
distribution maps from <a href="https://www.mapspam.info/" class="external-link">MAPSPAM</a>.
Note that newer versions of MAPSPAM are not available in the geodata
package, as of October 10, 2025.</p>
<p>• You may prefer that your analysis be based on both the Monfreda and
MAPSPAM datasets. In this case, you may first get a spatRaster with host
density for the target crop category from each dataset and then average
them to generate a SpatRaster of the mean host availability. Another
situation is that you need to add different crop categories into a
SpatRaster because the habitat of a species ranges across multiple crop
species.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Krishna Keshav, Aaron Plex, Karen Garrett, University of Florida.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
